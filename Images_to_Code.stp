{"metadata":{"guid":"b483c817-33e7-462d-92af-d2076e3bfc71","url":"/v2/streaming_pipelines/b483c817-33e7-462d-92af-d2076e3bfc71","created_at":"2019-02-10T08:04:21Z","updated_at":"2019-02-17T12:54:06Z","revision":1550408046094},"entity":{"name":"Images to Code","description":"","project_guid":"f5dd27bb-3d3f-4b85-869e-b1a7f48e4d22","graph":{"doc_type":"pipeline","version":"1.0","json_schema":"http://www.ibm.com/ibm/wdp/flow-v1.0/pipeline-flow-v1-schema.json","id":"","app_data":{"ui_data":{"name":"Images to Code"}},"primary_pipeline":"primary-pipeline","pipelines":[{"id":"primary-pipeline","runtime":"streams","nodes":[{"id":"code_tw58pv91x4","type":"binding","op":"ibm.streams.sources.code","outputs":[{"id":"target","schema_ref":"schema0","links":[{"node_id_ref":"code_dt9vkolwtnr","port_id_ref":"source"}]}],"parameters":{"code":"#\n# YOU MUST EDIT THE SCHEMA and add all attributes that you are returning as output.\n#\n# Preinstalled Python packages can be viewed from the Settings pane.\n# In the Settings pane you can also install additional Python packages.\n\nimport sys\nimport time\nimport logging\nimport base64\n\n# Use this logger for tracing or debugging your code:\nlogger = logging.getLogger(__name__)\n# Example:\n#     logger.debug('Got to step 2...')\n\n# init() function will be called once on pipeline initialization\n# @state a Python dictionary object for keeping state. The state object is passed to the produce function\ndef init(state):\n    # do something once on pipeline initialization and save in the state object\n    pass\n\n\n# produce() function will be called when the job starts to run.\n# It is called on a background thread, and it will typically invoke the 'submit()' callback\n# whenever a tuple of data is ready to be emitted from this operator.\n# This allows for using asynchronous data services as well as synchronous data generation or retrieval.\n# @submit a Python callback function that takes one argument: a dictionary representing a single tuple.\n# @state a Python dictionary object for keeping state\n# You must declare all output attributes in the Edit Schema window.\ndef produce(submit, state):\n    base64List = [\\\n       # \"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABpSURBVDhPzZJBCoAwDATzA321B/HD6qFmm4NkQ6uFHDowENLtniJZHOqtlh8it6uOS11srCDYArnTxhf+0CsA4T2lYFQHL0KAmLRgVAcvQoDIL8AlrjZWegXIhUvEbaMEH79EblOnQOQBlIFM8vCjwBkAAAAASUVORK5CYII=\",\\\n        #\"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADQSURBVDhP1dIxDgFBFMbxrYSEgk5BIs7gBhKFcA8HEK2GRENBZ11CpeECErVoFAoJSgoa/l9eNiSzYZX7Jb/k7czO292Z9WKZGvZW/pcMBtjhqYFfSaGIJia4YIYsnAY93KGJgK6PWKKNEoI4DXSzOivOZEh0z8hKy+eiqA1uVloeSFoZucHQSssGFcyhSbliC+1BB2UEcR4yRQtdaEMVnUIBdYxxgk4hB6eBFvtoYKGBkKTRR+h/oNfXZ+Rx1sCXVHGw8p0E1lDnlQbiEs97AZLbMqfAn5PlAAAAAElFTkSuQmCC\",\\\n        #\"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAB8SURBVDhPYxh0oBWIfwLxfxwYJNcCxDgBSIEghIkVgORAanACkC2EAF41owZgSspBMTIg2oAgIH4FxSA2DBA0gAOIpwLxXSA2hWIQGyQGkiNowEUgXgbEfCABKACxQWIgObwGfAXiJAgTKwDJgdTgBBpQGh8gRg2xgIEBAHAzKRK8xqOAAAAAAElFTkSuQmCC\",\\\n       # \"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADYSURBVDhP1dG7DgFBFMbxKd1KD6GQ8AQUaFwS0ZJQeAqh9gwKEYl3EVSIS0ehEQmFUiL+3262nR2NxJf8kjmTzNk5s+ZXqWGFJ5aowDlVvNFDHEWcUYZT5tDhG/LaIGqy8Jf2ZPBCDDocNNFNNI41CRxxR0EbJGgygN7CmhlGaOCEEvTlPvQm1ofsYo2oVxlTxwMaJ/QvpHFFyquMiUA30ThZbdiiK+7R8iq/yQYaR28SminG/tI0oZtoHKe0sUMSExygcZxzwRBbqIHG+So5qEnHq/4kxnwAQn8rDjsWE1cAAAAASUVORK5CYII=\",\\\n       # \"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACZSURBVDhPzZJNCoMwEEZzhHYl9DyeyroqFAoidOWFeh3Bbrpoodj3GZMmoGI2tQ8ezk9mzCLmbzjjE/sV3nCHERre23BAB0PCvMHKhl+WBkSYH7DFbMhGUhaIK9Y2tOhAqh16VEglmkld4G7h+fkNRDTzwgvesVRhggJdX29Gb8ej4htz1OY5XV/DJ4w44mP8TqGfLPU3wZgPe39DqFKhqUwAAAAASUVORK5CYII=\",\\\n        #\"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAA+SURBVDhPY6A2+E8ExgsIKSDaAJhtyBgEYDROQEgB0QaAaHQMAjAaJyCkYNSAgTBgN5SGAfq4gBCmJmBgAADbrTSIsr4dVAAAAABJRU5ErkJggg==\",\\\n        \"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\",\\\n    ]\n    idx = 0\n    image = base64.b64decode(base64List[idx])\n    while(True):\n        # Submit a tuple in each iteration:\n       \n        submit({\"image\": image})\n        idx += 1\n        if idx >= 1:\n            idx = 0\n        \n\n\n","schema_mapping":[{"name":"image","type":"blob","length":0,"source_elem_name":""}]},"app_data":{"ui_data":{"label":"Code","x_pos":90,"y_pos":220}}},{"id":"code_dt9vkolwtnr","type":"execution_node","op":"ibm.streams.operations.code","outputs":[{"id":"target","schema_ref":"schema1","links":[{"node_id_ref":"freeform_filter_qc2brnh5j4","port_id_ref":"source"}]}],"parameters":{"schema_mapping":[{"name":"image","type":"blob"}]},"app_data":{"ui_data":{"label":"Code","x_pos":310,"y_pos":220}}},{"id":"freeform_filter_qc2brnh5j4","type":"execution_node","op":"ibm.streams.operations.freeform-filter","outputs":[{"id":"target","schema_ref":"schema2","links":[{"node_id_ref":"messagehub_okin6m5avvh","port_id_ref":"source"}]}],"parameters":{"expression":"True"},"app_data":{"ui_data":{"label":"Filter","x_pos":510,"y_pos":230}}},{"id":"messagehub_okin6m5avvh","type":"binding","op":"ibm.streams.targets.messagehub","parameters":{"format":"None"},"connection":{"ref":"6cd7d180-c1a5-4dd0-b7b2-90f5f047a0d4","project_ref":"f5dd27bb-3d3f-4b85-869e-b1a7f48e4d22","properties":{"asset":{"id":"mytopic","name":"mytopic","type":"topic","path":"/mytopic"}}},"app_data":{"ui_data":{"label":"Event Streams","x_pos":730,"y_pos":220}}}]}],"schemas":[{"id":"schema0","fields":[{"name":"image","type":"blob"}]},{"id":"schema1","fields":[{"name":"image","type":"blob"}]},{"id":"schema2","fields":[{"name":"image","type":"blob"}]}]},"engines":{"streams":{"instance_id":"f2cfe308-de93-46d9-a3b5-f2c6d354278c"}}}}